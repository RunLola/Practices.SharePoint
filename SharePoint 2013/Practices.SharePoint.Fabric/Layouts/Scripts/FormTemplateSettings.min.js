"use strict";function CollectData(){var n=[],t={ControlMode:0,Rows:[]},i=$(".form-horizontal").find(".row");i.each(function(){var n=[],i=$(this).find(".form-group");i.each(function(){var t={Title:$(this).find("h3").text(),InternalName:$(this).attr("id"),ClassName:$(this).parent().attr("class")};n.push(t)});t.Rows.push(n)});n.push(t);$("#JsonString").val(JSON.stringify(n))}LoadSodByKey("jquery.ui.js",function(){LoadSodByKey("react-dom.js",function(){var n=React.createClass({displayName:"Grid",getInitialState:function(){return{data:this.props.data}},componentDidMount:function(){$(ReactDOM.findDOMNode(this)).droppable({accept:".gridRow",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(n,t){var i=$(t.draggable);this.state.data.push([]);this.setState({data:this.state.data})}.bind(this)});$(ReactDOM.findDOMNode(this)).sortable({revert:!0,placeholder:"ui-state-highlight"})},render:function(){var n=this.state.data.map(function(n){return React.createElement(t,{data:n})});return React.createElement("div",{className:"form-horizontal"},n)}}),t=React.createClass({displayName:"GridRow",getInitialState:function(){return{data:this.props.data}},componentDidMount:function(){$(ReactDOM.findDOMNode(this)).droppable({accept:".gridCol, .col-sm-12",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(n,t){var i=$(t.draggable);this.state.data.push({Title:i.hasClass("gridCol")?i.text():i.find("h3").text(),InternalName:i.hasClass("gridCol")?i.attr("id"):i.find(".form-group").attr("id")});i.remove();this.setState({data:this.state.data})}.bind(this)});$(ReactDOM.findDOMNode(this)).sortable({handle:".col-sm-12",revert:!0,placeholder:"ui-state-highlight"})},render:function(){var n=this.state.data.map(function(n){return React.createElement(i,{Title:n.Title,InternalName:n.InternalName})});return React.createElement("div",{className:"row"},n)}}),i=React.createClass({displayName:"GridCol",componentDidMount:function(){$(ReactDOM.findDOMNode(this)).draggable({revert:"invalid",containment:"document",helper:function(){return $("<div class='form-group'><\/div>")},drag:function(n,t){t.helper.width(350).css("z-index",1)},cursor:"move"});$(ReactDOM.findDOMNode(this)).dblclick(function(){$(this).removeClass("col-md-6").addClass("col-md-12")})},render:function(){return React.createElement("div",{className:"col-sm-12 col-md-6"},React.createElement("div",{id:this.props.InternalName,className:"form-group"},React.createElement("label",{className:"ms-formlabel control-label col-sm-2"},React.createElement("h3",{className:"ms-standardheader"},this.props.Title)),React.createElement("div",{className:"ms-formbody col-sm-10"},React.createElement("input",{type:"text",className:"ms-long",disabled:"disabled"}))))}});$(function(){$(".col-sm-12").removeClass(function(n,t){return(t.match(/\bui-\S+/g)||[]).join(" ")});$(".gridRow").draggable({revert:"invalid",containment:"document",helper:function(){return $("<div class='row'><\/div>")},drag:function(n,t){t.helper.width(350).css("z-index",1)},cursor:"move"});$(".gridCol").draggable({revert:"invalid",containment:"document",helper:function(){return $("<div class='form-group'><\/div>")},drag:function(n,t){t.helper.width(350).css("z-index",1)},cursor:"move"});var t=JSON.parse($("#JsonString").val()),i=t[0]!=null?t[0]:{Rows:[]};ReactDOM.render(React.createElement(n,{data:i.Rows}),$(".container-fluid").get(0))})})});