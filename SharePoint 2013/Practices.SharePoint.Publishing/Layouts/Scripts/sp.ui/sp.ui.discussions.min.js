ExecuteOrDelayUntilEventNotified(function(){SP.UI.Discussions.HeaderBehavior.prototype.attachEvents=function(){var i=$get(this.$1J_0),n,t;SP.UI.Discussions.Helpers.isNullOrUndefined(i)||$addHandler(i,"click",this.$$d_onClickNewPostLink);n=$get(this.$1P_0);SP.UI.Discussions.Helpers.isNullOrUndefined(n)||$addHandler(n,"click",this.$$d_$2U_0);t=$get("DiscussionsSearchButton");SP.UI.Discussions.Helpers.isNullOrUndefined(t)||$addHandler(t,"click",Function.createDelegate(this,function(){var n=$get("DiscussionsSearchInput").value,t=new SP.UI.Discussions.QueryOverrideItem(this.context,"查询",' <Query><OrderBy><FieldRef Name="Created" Ascending="FALSE" /><\/OrderBy><Where><Contains><FieldRef Name="Title" /><Value Type="Text">'+n+"<\/Value><\/Contains><\/Where><\/Query>");t.onClick()}));this.sortFilterPickerControl.initialize()};SP.UI.Discussions.HeaderBehavior.prototype.render=function(n){if(!SP.UI.Discussions.Helpers.isAnonymousAccess(this.context)){var t=this.getNewPostUrl();n.addCommunitiesCssClass("heroLinkContainer");n.renderBeginTag("div");n.addAttribute("id",this.$1J_0);n.addAttribute("href",t);n.addCssClass("ms-textXLarge");n.addCssClass("ms-heroCommandLink");n.addAttribute("title",Strings.STS.L_SPDiscHeroLinkAltText);n.renderBeginTag("a");n.addCssClass("ms-list-addnew-imgSpan20");n.renderBeginTag("span");n.addCssClass("ms-list-addnew-img20");n.addAttribute("src",GetThemedImageUrl("spcommon.png"));n.renderBeginTag("img");n.renderEndTag();n.renderEndTag();n.renderBeginTag("span");n.writeEncoded(Strings.STS.L_SPDiscHeroLinkFormat);n.renderEndTag();n.renderEndTag();n.addAttribute("style","float: right;");n.renderBeginTag("div");n.addCssClass("ms-srch-sb ms-srch-sb-border");n.renderBeginTag("div");n.addCssClass("ms-textSmall ms-srch-sb-prompt ms-helperText");n.addAttribute("type","text");n.addAttribute("id","DiscussionsSearchInput");n.renderBeginTag("input");n.renderEndTag();n.addCssClass("ms-srch-sb-searchLink");n.addAttribute("title","搜索");n.addAttribute("id","DiscussionsSearchButton");n.renderBeginTag("a");n.addCssClass("ms-srch-sb-searchImg");n.addAttribute("src","/_layouts/15/images/searchresultui.png?rev=23");n.renderBeginTag("img");n.renderEndTag();n.renderEndTag();n.renderEndTag();n.renderEndTag();n.addCssClass("ms-clear");n.renderBeginTag("div");n.renderEndTag();n.renderEndTag()}n.addCommunitiesCssClass("forumHeaderContainer");n.renderBeginTag("div");this.sortFilterPickerControl.$1B_0=!0;this.sortFilterPickerControl.render(n);n.addAttribute("id",this.$1P_0);n.addAttribute("href","javascript:;");n.addAttribute("title",Strings.STS.L_SPDiscRefresh);n.addCssClass("ms-floatRight");n.addCommunitiesCssClass("refreshIcon-a");n.renderBeginTag("a");n.addAttribute("src",GetThemedImageUrl("spcommon.png"));n.addCommunitiesCssClass("refreshIcon");n.addAttribute("alt",Strings.STS.L_SPDiscRefresh);n.addAttribute("title",Strings.STS.L_SPDiscRefresh);n.renderBeginTag("img");n.renderEndTag();n.renderEndTag();n.addCssClass("ms-clear");n.renderBeginTag("div");n.renderEndTag();n.renderEndTag()};SP.UI.Discussions.HeaderBehavior.prototype.populateSortFilterItemList=function(){for(var i,r=[new SP.UI.Discussions.QueryOverrideItem(this.context,"最新发布",""),new SP.UI.Discussions.QueryOverrideItem(this.context,"最多回复",'<Query><OrderBy><FieldRef Name="ItemChildCount" Ascending="FALSE" /><\/OrderBy><\/Query>'),new SP.UI.Discussions.QueryOverrideItem(this.context,Strings.STS.L_SPDiscSortUnanswered,'<Query><OrderBy UseIndexForOrderBy="TRUE" Override="TRUE"/><Where><Eq><FieldRef Name="IsAnswered"/><Value Type="Integer">0<\/Value><\/Eq><\/Where><\/Query>'),new SP.UI.Discussions.QueryOverrideItem(this.context,Strings.STS.L_SPDiscSortAnswered,'<Query><OrderBy UseIndexForOrderBy="TRUE" Override="TRUE"/><Where><Eq><FieldRef Name="IsAnswered"/><Value Type="Integer">1<\/Value><\/Eq><\/Where><\/Query>'),new SP.UI.Discussions.QueryOverrideItem(this.context,Strings.STS.L_SPDiscFilterFeatured,'<Query><OrderBy UseIndexForOrderBy="TRUE" Override="TRUE"/><Where><Eq><FieldRef Name="IsFeatured"><\/FieldRef><Value Type="Integer">1<\/Value><\/Eq><\/Where><\/Query>')],t=r,u=t.length,n=0;n<u;++n)i=t[n],this.sortFilterPickerControl.addItem(i);SP.UI.Discussions.Helpers.isAnonymousAccess(this.context)||this.sortFilterPickerControl.insertItem(1,new SP.UI.Discussions.QueryOverrideItem(this.context,Strings.STS.L_SPDiscSortMyPosts,'<Query><OrderBy UseIndexForOrderBy="TRUE" Override="TRUE"/><Where><Eq><FieldRef Name="Author"/><Value Type="Integer"><UserID Type="Integer"/><\/Value><\/Eq><\/Where><\/Query>'))}},"sp.scriptloaded-sp.ui.discussions.js");